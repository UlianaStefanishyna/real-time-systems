<!DOCTYPE HTML>
<html>
<head>
    <script type="text/javascript">
        function autoFill() {

            var xhr = new XMLHttpRequest();
            var n = document.getElementById("input1");
            var frequency = document.getElementById("input4");
            var pointsAmount = document.getElementById("input3");

            xhr.open("POST", "/chart", true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            var body = JSON.stringify({
                "amount_of_harmonic": +n.value,
                "points_amount": +pointsAmount.value,
                "frequency": +frequency.value
            });
            console.log(body);
            xhr.send(body);

            xhr.onreadystatechange = (e) =>{
                var arr = [];
                console.log(xhr.responseText);
                var jsonData = JSON.parse(xhr.responseText);
                for (var i = 0; i < jsonData.points.length; i++) {
                    var point = jsonData.points[i];
                    arr.push({
                        label: point.time,
                        x: point.time,
                        y: point.value
                    });
                }
                console.log(arr);
                var chart1 = new CanvasJS.Chart("chartContainer", {
                    title: {
                        text: "Harmonics data"
                    },
                    data: [{
                        type: "area", // "area", "column"
                        dataPoints: arr
                    }]
                });
                chart1.render();
            }
        }
    </script>
    <title>chart</title>
</head>
<body>
<a href="#" onClick="autoFill(); return true;">Click to Autofill</a>
<form>
    <p>
        <label>Amount of harmonics: &#8195;</label>
        <input value="14" type="number" id="input1" width="10">
    </p>
    <p>
        <label>Frequency:&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;</label>
        <input value="2000" type="number" id="input4" maxlength="20">
    </p>
    <p>
        <label>Amount of points: &#8195;&#8195;&#8195;</label>
        <input value="256" type="number" id="input3" maxlength="20">
    </p>
</form>
<!--<label for="curso"></label><input id="curso" maxlength="60" name="curso" size="20" type="text">-->
<!--<label for="curso1"></label><input id="curso1" maxlength="60" name="curso" size="20" type="text">-->
<div id="chartContainer" style="height: 370px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</body>
</html>